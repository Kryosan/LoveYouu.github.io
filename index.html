<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Bucin Romantis</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff1493;
            --secondary-color: #ff69b4;
            --text-color: #333;
            --white: #fff;
            --gray: #a3a3a3;
            --dark-gray: #7a7a7a;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            text-align: center;
            transition: all 1s;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            color: var(--white);
            position: relative;
            overflow-x: hidden;
        }

        .container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 90%;
            position: relative;
            margin: 20px 0;
            padding-top: 80px;
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: 2rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        .question {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: var(--text-color);
            line-height: 1.5;
        }

        .options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .option {
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            font-size: 1rem;
            min-width: 120px;
        }

        .option-left {
            background-color: var(--white);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .option-right {
            background-color: var(--primary-color);
            color: white;
            border: 2px solid var(--primary-color);
        }

        .option:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .image-corner {
            position: absolute;
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 50%;
            top: -75px;
            right: 20px;
            border: 5px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
            transition: all 0.5s;
        }

        .celebration {
            background: linear-gradient(135deg, var(--secondary-color), #ff8fab);
            animation: pulse 2s infinite alternate;
        }

        @keyframes pulse {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .heartbreak {
            background: linear-gradient(135deg, var(--gray), var(--dark-gray));
            color: var(--white);
        }

        .scary {
            background-color: #000;
            color: #f00;
        }

        .flower {
            position: absolute;
            width: 30px;
            height: 30px;
            background-size: contain;
            background-repeat: no-repeat;
            animation: falling linear forwards;
            z-index: 100;
            font-size: 24px;
        }

        @keyframes falling {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .hidden {
            display: none;
        }

        #partyAnthem {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        #partyAnthem:hover {
            transform: scale(1.1);
        }

        #partyAnthem i {
            font-size: 24px;
            color: var(--primary-color);
        }

        .hearts {
            position: absolute;
            font-size: 20px;
            animation: float 5s linear infinite;
            opacity: 0;
        }

        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Admin Panel Styles */
        #admin-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 2000;
        }

        #admin-btn {
            background-color: #333;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
        }

        #admin-login {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-top: 10px;
            display: none;
        }

        #admin-login input {
            padding: 8px;
            margin: 5px 0;
            width: 100%;
        }

        #admin-login button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        #admin-view {
            background-color: white;
            color: var(--text-color);
            padding: 20px;
            border-radius: 10px;
            max-width: 90%;
            margin: 20px auto;
            display: none;
        }

        #respondents-list {
            text-align: left;
            margin-top: 15px;
        }

        /* Name Input Styles */
        #name-input {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        #name-form {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
        }

        #name-form input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        #name-form button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Message Form Styles */
        #message-form input,
        #message-form textarea {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 2px solid #ff69b4;
            border-radius: 10px;
            font-family: 'Montserrat', sans-serif;
        }

        #message-form button[type="submit"] {
            background-color: #ff1493;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            transition: all 0.3s;
        }

        #message-form button[type="submit"]:hover {
            background-color: #ff69b4;
        }

        .thank-you {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--text-color);
        }

        /* Thank You Page */
        #thank-you-page {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        #thank-you-page .container {
            margin-top: 50px;
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .thank-you-message {
  text-align: center;
  margin: 20px 0;
  line-height: 1.8;
}

.romantic-text {
  background-color: rgba(255, 255, 255, 0.7);
  border-radius: 15px;
  padding: 20px;
  margin: 20px 0;
  text-align: left;
  font-style: italic;
}

.highlight-name {
  color: #ff1493;
  font-weight: bold;
}

.thank-you-title {
  font-size: 1.2rem;
  margin-bottom: 20px;
  font-weight: bold;
}

        /* Responsive adjustments */
        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .question {
                font-size: 1rem;
            }
            
            .option {
                padding: 10px 20px;
                font-size: 0.9rem;
                min-width: 100px;
            }
            
            .image-corner {
                width: 100px;
                height: 100px;
                top: -50px;
                right: 10px;
            }

            .container {
                padding-top: 70px;
            }
        }

        @media (max-width: 360px) {
            .container {
                padding: 20px;
                padding-top: 60px;
            }
            
            h1 {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }
            
            .options {
                gap: 10px;
                margin-top: 20px;
            }
            
            .image-corner {
                width: 80px;
                height: 80px;
                top: -40px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <audio id="partyMusic" loop>
        <source src="no1.mp3" type="audio/mpeg">
    </audio>
    <audio id="scarySound">
        <source src="Get out meme.mp3" type="audio/mpeg">
    </audio>
    <audio id="romanticSound1">
        <source src="romantic1.mp3" type="audio/mpeg">
    </audio>
    <audio id="romanticSound2">
        <source src="romantic2.mp3" type="audio/mpeg">
    </audio>

    <!-- Admin Panel -->
    <div id="admin-panel">
        <button id="admin-btn" onclick="toggleAdminLogin()"><i class="fas fa-lock"></i> Admin</button>
        <div id="admin-login">
            <input type="password" id="admin-password" placeholder="Masukkan Password">
            <button onclick="loginAdmin()">Login</button>
        </div>
    </div>

    <!-- Admin View -->
    <div id="admin-view">
        <h2>Daftar Responden</h2>
        <div id="respondents-list"></div>
        <button onclick="exitAdminView()" style="margin-top: 20px;">Keluar</button>
    </div>

    <!-- Name Input Screen -->
    <div id="name-input">
        <div id="name-form">
            <h2 style="color: #ff1493;">Masukkan Nama Kamu</h2>
            <input type="text" id="user-name" placeholder="Nama kamu" required>
            <button onclick="startSurvey()">Mulai</button>
        </div>
    </div>

    <!-- Message Form -->
    <div id="message-container" class="container hidden">
        <img src="wlee.jpeg" alt="Love Message" class="image-corner">
        <h1>💌 Pesan Cinta 💌</h1>
        <div class="thank-you">Terimakasih telah mengisi ini</div>
        <div class="question">Tinggalkan pesan untuk orang yang kamu cintai</div>
        
        <form id="message-form">
            <input type="hidden" name="_subject" value="Pesan Cinta Baru!">
            <input type="hidden" name="_template" value="table">
            <input type="text" id="loved-one-name" name="to" placeholder="Dear (nama orang yang kamu cintai)" required>
            <input type="text" id="from-name" name="from" placeholder="Untukmu dari (namamu)" value="" readonly required>
            <textarea id="love-message" name="message" placeholder="Tuliskan pesan untuk orang yang kamu cintai" required></textarea>
            <input type="hidden" name="_cc" value="dewudd2@gmail.com">
            <input type="hidden" name="_captcha" value="false">
            <button type="submit">Kirim Pesan Cinta</button>
        </form>
        <div class="spinner" id="message-spinner"></div>
        <div id="message-success" style="display: none; color: #ff1493; margin-top: 15px;">
            Pesanmu telah terkirim! ❤️
        </div>
    </div>

    <div id="partyAnthem" onclick="toggleMusic()">
        <i class="fas fa-music"></i>
    </div>

    <!-- Initial Screen -->
    <div id="initial-screen" class="container hidden">
        <img src="hay.jpg" alt="Romantic" class="image-corner">
        
        <h1>❤️ Untuk Kamu Yang Tercinta ❤️</h1>
        <div class="question">Kamu sayang gak sama aku?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('sayang')">Sayang banget dong</button>
            <button class="option option-right" onclick="showResponse('gak')">Gak sayang sama sekali</button>
        </div>
    </div>

    <!-- Celebration Response -->
    <div id="celebration-response" class="container celebration hidden">
        <img src="llove.jpeg" alt="Celebration" class="image-corner">
        
        <h1>🎉 Aku Juga Sayang Sama Kamu! 🎉</h1>
        <div class="question">Mau jadi istriku?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('mau')">Mau!, aku mau!</button>
            <button class="option option-right" onclick="showResponse('gak-mau')">Gak mau ah</button>
        </div>
    </div>

    <!-- Heartbreak Response -->
    <div id="heartbreak-response" class="container heartbreak hidden">
        <img src="heee.jpg" alt="Heartbreak" class="image-corner">
        
        <h1>😢 Kenapa Kamu Gak Sayang? 😢</h1>
        <div class="question">Aku sedih banget nih... Pencet "sayang dong" please</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('sayang-dong')">Aku sayang kok, bercanda tadi</button>
            <button class="option option-right" onclick="showResponse('gak-lagi')">Beneran gak sayang</button>
        </div>
    </div>

    <!-- Chocolate Offer -->
    <div id="chocolate-offer" class="container hidden">
        <img src="sadd.jpeg" alt="Chocolate" class="image-corner">
        
        <h1>🍫 Coklat Banyak 🍫</h1>
        <div class="question">Aku punya coklat favorit kamu yang banyak lhoo, mau?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('mau-coklat')">Mau dong, kamu baik banget</button>
            <button class="option option-right" onclick="showResponse('gak-peduli')">Gak peduli sama coklatmu</button>
        </div>
    </div>

    <!-- Ultraman Offer -->
    <div id="ultraman-offer" class="container hidden">
        <img src="sadd2.jpeg" alt="Ultraman" class="image-corner">
        
        <h1>🦸‍♂️ Gelang Ultraman 🦸‍♂️</h1>
        <div class="question">Aku bakal lindungi kamu pake gelang Ultraman ku, mau?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('mau-ultraman')">Ya, aku mau dilindungi kamu</button>
            <button class="option option-right" onclick="showResponse('gak-peduli-lagi')">Gak peduli sama perlindunganmu</button>
        </div>
    </div>

    <!-- Romantic Question 1 -->
    <div id="romantic-question1" class="container hidden">
        <img src="malu.jpeg" alt="Romantic" class="image-corner">
        
        <h1>💝 Kamu Cantik Banget 💝</h1>
        <div class="question">Aku suka banget sama senyum kamu, boleh aku lihat senyum kamu setiap hari?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('iya-boleh')">Boleh banget</button>
            <button class="option option-right" onclick="showResponse('gak-boleh')">Gak boleh, aku malu</button>
        </div>
    </div>

    <!-- Romantic Question 2 -->
    <div id="romantic-question2" class="container hidden">
        <img src="heeh.jpeg" alt="Romantic" class="image-corner">
        
        <h1>🌹 Aku Rindu Kamu 🌹</h1>
        <div class="question">Kalo aku bilang aku kangen banget sama kamu, kamu percaya gak?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('percaya')">Percaya, aku juga kangen</button>
            <button class="option option-right" onclick="showResponse('gak-percaya')">Gak percaya, bohong kali</button>
        </div>
    </div>

    <!-- Romantic Question 3 -->
    <div id="romantic-question3" class="container hidden">
        <img src="puisi1.jpeg" alt="Romantic" class="image-corner">
        
        <h1>💌 Untuk Kamu 💌</h1>
        <div class="question">Aku udah nulis puisi buat kamu, mau dengar gak?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('mau-dengar')">Mau dong, aku penasaran</button>
            <button class="option option-right" onclick="showResponse('gak-mau-dengar')">Gak mau, pasti jelek</button>
        </div>
    </div>

    <!-- Romantic Question 4 -->
    <div id="romantic-question4" class="container hidden">
        <img src="love2.jpeg" alt="Romantic" class="image-corner">
        
        <h1>✨ Kamu Special Banget ✨</h1>
        <div class="question">Aku pengen nemenin kamu terus samape tua, kamu mau gak?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('mau-tua')">Mau banget, aku juga pengen</button>
            <button class="option option-right" onclick="showResponse('gak-mau-tua')">Gak mau, kamu aneh</button>
        </div>
    </div>

    <!-- Romantic Question 5 -->
    <div id="romantic-question5" class="container hidden">
        <img src="ya.jpeg" alt="Romantic" class="image-corner">
        
        <h1>💞 Aku Sayang Kamu 💞</h1>
        <div class="question">Kalo aku bilang kamu adalah cinta terakhirku, kamu percaya gak?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('percaya-bgt')">Percaya banget, aku juga gitu</button>
            <button class="option option-right" onclick="showResponse('gak-percaya-lg')">Gak percaya, lebay banget</button>
        </div>
    </div>

    <!-- Final Question -->
    <div id="final-question" class="container hidden">
        <img src="sadd4.jpeg" alt="Final" class="image-corner">
        
        <h1>😢 Beneran Nih? 😢</h1>
        <div class="question">Kamu beneran nih gak sayang sama aku?</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('bercanda')">Hehe, bercanda sayang</button>
            <button class="option option-right" onclick="showResponse('iya-lah')">Iya lah, beneran</button>
        </div>
    </div>

    <!-- Romantic Response -->
    <div id="romantic-response" class="container celebration hidden">
        <img src="hore.jpeg" alt="Romantic" class="image-corner">
        
        <h1>💖 Awww Ayang 💖</h1>
        <div class="question">Awww ayang bisa aja dehh, aku jadi malu nih! ❤️</div>
        <div class="options">
            <button class="option option-left" onclick="showResponse('peluk')">Peluk aku dong</button>
            <button class="option option-right" onclick="showResponse('cium')">Cium aku dong</button>
        </div>
    </div>

    <!-- Pelukan Response -->
    <div id="pelukan-response" class="container celebration hidden">
        <img src="peyuk.jpeg" alt="Pelukan" class="image-corner">
        
        <h1>🤗 Pelukan Hangat 🤗</h1>
        <div class="question">Ini pelukan terhangat khusus buat kamu! Aku sayang banget sama kamu!</div>
        <button class="option option-left" onclick="showMessageForm()" style="margin-top: 20px;">Tulis Pesan Cinta</button>
    </div>

    <!-- Ciuman Response -->
    <div id="ciuman-response" class="container celebration hidden">
        <img src="muuach.jpeg" alt="Ciuman" class="image-corner">
        
        <h1>😘 Ciuman Sayang 😘</h1>
        <div class="question">Muahhh! Ini ciuman tulus dari aku untuk kamu! Kamu yang terbaik!</div>
        <button class="option option-left" onclick="showMessageForm()" style="margin-top: 20px;">Tulis Pesan Cinta</button>
    </div>

    <!-- Scary Response -->
    <div id="scary-response" class="container scary hidden">
        <h1>👿 AKU UDAH MUAK SAMA KAMU 👿</h1>
        <div class="question" id="user-info"></div>
    </div>

    <script>
        // Data storage
        let respondents = JSON.parse(localStorage.getItem('bucinRespondents')) || [];
        let loveMessages = JSON.parse(localStorage.getItem('loveMessages')) || [];
        let currentUser = null;
        let userResponses = [];
        const ADMIN_PASSWORD = "159951";
        let isAdmin = false;

        // Music control
        const partyMusic = document.getElementById('partyMusic');
        const scarySound = document.getElementById('scarySound');
        const romanticSound1 = document.getElementById('romanticSound1');
        const romanticSound2 = document.getElementById('romanticSound2');
        let musicPlaying = false;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Show name input first
            document.getElementById('name-input').style.display = 'flex';
            
            // Hide all other containers
            document.querySelectorAll('.container').forEach(el => {
                el.classList.add('hidden');
            });

            // Setup form submit
            setupFormSubmit();
        });

        // Setup FormSubmit
        function setupFormSubmit() {
            const form = document.getElementById('message-form');
            form.action = `https://formsubmit.co/ajax/dewudd2@gmail.com`;
            form.method = 'POST';
            
            form.onsubmit = async (e) => {
                e.preventDefault();
                
                const spinner = document.getElementById('message-spinner');
                const successMsg = document.getElementById('message-success');
                
                try {
                    spinner.style.display = 'block';
                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: new FormData(form)
                    });
                    
                    const result = await response.json();
                    if (!response.ok) throw new Error(result.message || 'Gagal mengirim');
                    
                    // Save message data
                    const formData = new FormData(form);
                    const userInfo = await getUserInfo();
                    const messageData = {
                        from: formData.get('from'),
                        to: formData.get('to'),
                        message: formData.get('message'),
                        ip: userInfo.ip,
                        location: userInfo.location,
                        timestamp: new Date().toISOString()
                    };
                    
                    // Save to localStorage
                    loveMessages.push(messageData);
                    localStorage.setItem('loveMessages', JSON.stringify(loveMessages));
                    
                    // Save to responses
                    userResponses.push({
                        question: "Love Message",
                        choice: `Dear ${messageData.to}, From ${messageData.from}, Message: ${messageData.message}`
                    });
                    saveResponses();
                    
                    spinner.style.display = 'none';
                    successMsg.style.display = 'block';
                    
                    setTimeout(() => {
                        showThankYouPage(messageData.from, messageData.to);
                    }, 2000);
                    
                } catch (error) {
                    console.error('Error:', error);
                    alert('Gagal mengirim pesan. Coba lagi nanti.');
                    spinner.style.display = 'none';
                }
            };
        }

        // Show message form
        function showMessageForm() {
            document.querySelectorAll('.container').forEach(el => {
                el.classList.add('hidden');
            });
            document.getElementById('message-container').classList.remove('hidden');
            document.getElementById('from-name').value = currentUser;
            document.body.className = 'celebration';
            romanticSound1.play();
            createHearts();
        }

        // Show thank you page
        function showThankYouPage(fromName, toName) {
            document.getElementById('message-container').classList.add('hidden');
            
            const thankYouHTML = `<div class="container celebration">
  <img src="love2.jpeg" alt="Thank You" class="image-corner">
  <h1>💖 Terima Kasih 💖</h1>
  <div class="thank-you-message">
    <p class="thank-you-title">Pesan cintamu untuk <span class="highlight-name">${toName}</span> sudah terkirim!</p>
    
    <div class="romantic-text">
      <p>Hai <span class="highlight-name"> Hai ${fromName}</span>, Terima kasih...</p>
      <p>
Telah menitipkan pesan yang begitu dalam kepada hatiku.
Aku bisa merasakan setiap kata yang kamu tulis bukan sekadar huruf,
tapi keberanian yang lahir dari cinta yang jujur.

Andai semesta memberiku izin untuk berkata lebih,
mungkin aku hanya akan berbisik:
“Kamu adalah seseorang yang pantas untuk dicintai setulus itu juga.”

Tapi untuk saat ini,
biarkan aku menjawabmu lewat doa.

Semoga suatu hari nanti,
kamu bisa berjalan berdampingan dengan orang yang hatimu pilih
dan kalian tidak lagi perlu mengirim pesan dari jauh,
karena tanganmu sudah bisa menggenggamnya erat,
setiap hari.

Tetaplah mencinta dengan cara yang indah seperti ini..
Karena cinta yang tulus,
selalu menemukan jalannya. 🌸.</p>
      <!-- Teks lainnya -->
    </div>

</div>

            `;
            
            const thankYouDiv = document.createElement('div');
            thankYouDiv.id = 'thank-you-page';
            thankYouDiv.innerHTML = thankYouHTML;
            document.body.appendChild(thankYouDiv);
            
            romanticSound1.play();
            createHearts();
        }

        // Fungsi untuk membuat efek hati melayang
        function createHearts() {
            const hearts = ['❤️', '🧡', '💛', '💚', '💙', '💜', '🤎', '🖤', '🤍'];
            const container = document.body;
            
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'hearts';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = Math.random() * 100 + 'vh';
                heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
                heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
                heart.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(heart);
                
                // Remove heart after animation
                setTimeout(() => {
                    heart.remove();
                }, 5000);
            }
        }

        // Fungsi untuk memulai musik dengan interaksi pengguna
        function enableMusic() {
            if (!musicPlaying) {
                partyMusic.volume = 0.5;
                romanticSound1.volume = 0.7;
                romanticSound2.volume = 0.7;
                
                const playPromise = partyMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        musicPlaying = true;
                        document.getElementById('partyAnthem').innerHTML = '<i class="fas fa-pause"></i>';
                    })
                    .catch(error => {
                        showMusicButton();
                    });
                }
            }
        }

        function toggleMusic() {
            if (musicPlaying) {
                partyMusic.pause();
                document.getElementById('partyAnthem').innerHTML = '<i class="fas fa-music"></i>';
            } else {
                partyMusic.play();
                document.getElementById('partyAnthem').innerHTML = '<i class="fas fa-pause"></i>';
            }
            musicPlaying = !musicPlaying;
        }

        // Show flowers animation
        function createFlowers() {
            const flowers = ['🌸', '🌹', '💐', '🌺', '🌷', '🏵️', '🌻', '🌼'];
            const container = document.body;
            
            for (let i = 0; i < 50; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.textContent = flowers[Math.floor(Math.random() * flowers.length)];
                flower.style.left = Math.random() * 100 + 'vw';
                flower.style.top = -50 + 'px';
                flower.style.animationDuration = (Math.random() * 3 + 2) + 's';
                flower.style.fontSize = (Math.random() * 20 + 10) + 'px';
                container.appendChild(flower);
                
                setTimeout(() => {
                    flower.remove();
                }, 5000);
            }
        }

        // Get user IP and location
        async function getUserInfo() {
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ip = ipData.ip;
                
                const locationResponse = await fetch(`https://ipapi.co/${ip}/json/`);
                const locationData = await locationResponse.json();
                
                let location = 'Tidak dapat menentukan lokasi';
                if (locationData.city && locationData.region && locationData.country_name) {
                    location = `${locationData.city}, ${locationData.region}, ${locationData.country_name}`;
                }
                
                return { ip, location };
            } catch (error) {
                console.error('Error getting user info:', error);
                return { ip: 'Tidak dapat mengambil IP', location: 'Tidak dapat menentukan lokasi' };
            }
        }

        // Start survey with user's name
        function startSurvey() {
            const userName = document.getElementById('user-name').value.trim();
            if (userName === '') {
                alert('Silakan masukkan nama kamu dulu ya!');
                return;
            }
            
            currentUser = userName;
            document.getElementById('name-input').style.display = 'none';
            document.getElementById('initial-screen').classList.remove('hidden');
            enableMusic();
        }

        // Save user responses
        function saveResponses() {
            if (!currentUser) return;
            
            getUserInfo().then(info => {
                const responseData = {
                    name: currentUser,
                    ip: info.ip,
                    location: info.location,
                    responses: userResponses,
                    timestamp: new Date().toISOString()
                };
                
                respondents.push(responseData);
                localStorage.setItem('bucinRespondents', JSON.stringify(respondents));
            });
        }

        // Admin functions
        function toggleAdminLogin() {
            const loginForm = document.getElementById('admin-login');
            loginForm.style.display = loginForm.style.display === 'block' ? 'none' : 'block';
        }

        function loginAdmin() {
            const password = document.getElementById('admin-password').value;
            if (password === ADMIN_PASSWORD) {
                isAdmin = true;
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-btn').style.display = 'none';
                showAdminView();
            } else {
                alert('Password salah!');
            }
        }

        function showAdminView() {
            document.getElementById('admin-view').style.display = 'block';
            document.getElementById('name-input').style.display = 'none';
            document.querySelectorAll('.container').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Populate respondents list
            const listElement = document.getElementById('respondents-list');
            listElement.innerHTML = '';
            
            if (respondents.length === 0 && loveMessages.length === 0) {
                listElement.innerHTML = '<p>Belum ada responden.</p>';
                return;
            }
            
            // Show survey respondents
            respondents.forEach((respondent, index) => {
                const respondentDiv = document.createElement('div');
                respondentDiv.style.marginBottom = '15px';
                respondentDiv.style.padding = '10px';
                respondentDiv.style.borderBottom = '1px solid #eee';
                
                const responseCodes = respondent.responses.map(r => {
                    return r.choice.includes('gak') ? '2' : '1';
                }).join('.');
                
                respondentDiv.innerHTML = `
                    <strong>${index + 1}. ${respondent.name}</strong>
                    <div>IP: ${respondent.ip}</div>
                    <div>Lokasi: ${respondent.location}</div>
                    <div>Respons: ${responseCodes}</div>
                    <div>Waktu: ${new Date(respondent.timestamp).toLocaleString()}</div>
                `;
                
                listElement.appendChild(respondentDiv);
            });
            
            // Show love messages
            if (loveMessages.length > 0) {
                const messagesDiv = document.createElement('div');
                messagesDiv.style.marginTop = '30px';
                messagesDiv.innerHTML = '<h3>Pesan-Pesan Cinta</h3>';
                
                loveMessages.forEach((msg, index) => {
                    messagesDiv.innerHTML += `
                        <div style="margin-bottom: 15px; padding: 10px; border-bottom: 1px solid #eee;">
                            <strong>${index + 1}. Dari ${msg.from} ke ${msg.to}</strong>
                            <div style="color: #ff1493; margin: 5px 0;">${msg.message}</div>
                            <div style="font-size: 0.8em; color: #666;">
                                IP: ${msg.ip} | Lokasi: ${msg.location} | 
                                Waktu: ${new Date(msg.timestamp).toLocaleString()}
                            </div>
                        </div>
                    `;
                });
                
                listElement.appendChild(messagesDiv);
            }
        }

        function exitAdminView() {
            isAdmin = false;
            document.getElementById('admin-view').style.display = 'none';
            document.getElementById('admin-btn').style.display = 'block';
            document.getElementById('name-input').style.display = 'flex';
        }

        // Show response based on user choice
        async function showResponse(choice) {
            // Record response
            userResponses.push({
                question: document.querySelector('.question').textContent,
                choice: choice
            });

            // Hide all screens first
            document.querySelectorAll('.container').forEach(el => {
                el.classList.add('hidden');
            });

            switch (choice) {
                case 'sayang':
                    document.getElementById('celebration-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound1.play();
                    createHearts();
                    break;
                case 'gak':
                    document.getElementById('heartbreak-response').classList.remove('hidden');
                    document.body.className = 'heartbreak';
                    break;
                case 'mau':
                    alert('Aku bakal datang kerumahmu besok! ❤️');
                    document.getElementById('romantic-question1').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound2.play();
                    createHearts();
                    break;
                case 'gak-mau':
                    document.getElementById('heartbreak-response').classList.remove('hidden');
                    document.body.className = 'heartbreak';
                    break;
                case 'sayang-dong':
                    document.getElementById('celebration-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound1.play();
                    createHearts();
                    break;
                case 'gak-lagi':
                    document.getElementById('chocolate-offer').classList.remove('hidden');
                    document.body.className = '';
                    break;
                case 'mau-coklat':
                    document.getElementById('romantic-question2').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound1.play();
                    createHearts();
                    break;
                case 'gak-peduli':
                    document.getElementById('ultraman-offer').classList.remove('hidden');
                    break;
                case 'mau-ultraman':
                    document.getElementById('romantic-question3').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound2.play();
                    createHearts();
                    break;
                case 'gak-peduli-lagi':
                    document.getElementById('final-question').classList.remove('hidden');
                    break;
                case 'iya-boleh':
                    document.getElementById('romantic-question4').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound1.play();
                    createHearts();
                    break;
                case 'gak-boleh':
                    document.getElementById('final-question').classList.remove('hidden');
                    break;
                case 'percaya':
                    document.getElementById('romantic-question5').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound2.play();
                    createHearts();
                    break;
                case 'gak-percaya':
                    document.getElementById('final-question').classList.remove('hidden');
                    break;
                case 'mau-dengar':
                    alert("Puisi untukmu:\n\nKau bagai mentari pagi\nYang hangatkan relung hati\nSetiap detik bersamamu\nAdalah anugerah terindah dalam hidupku");
                    document.getElementById('romantic-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound1.play();
                    createFlowers();
                    break;
                case 'gak-mau-dengar':
                    document.getElementById('final-question').classList.remove('hidden');
                    break;
                case 'mau-tua':
                    alert("Aku janji akan selalu menyayangimu sampai tua nanti ❤️");
                    document.getElementById('romantic-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound2.play();
                    createFlowers();
                    break;
                case 'gak-mau-tua':
                    document.getElementById('final-question').classList.remove('hidden');
                    break;
                case 'percaya-bgt':
                    alert("Aku bersyukur banget punya kamu di hidupku ❤️");
                    document.getElementById('romantic-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound1.play();
                    createFlowers();
                    break;
                case 'gak-percaya-lg':
                    document.getElementById('final-question').classList.remove('hidden');
                    break;
                case 'bercanda':
                    document.getElementById('romantic-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound2.play();
                    createFlowers();
                    break;
                case 'peluk':
                    document.getElementById('pelukan-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound1.play();
                    createHearts();
                    saveResponses();
                    break;
                case 'cium':
                    document.getElementById('ciuman-response').classList.remove('hidden');
                    document.body.className = 'celebration';
                    romanticSound2.play();
                    createHearts();
                    saveResponses();
                    break;
                case 'iya-lah':
                    partyMusic.pause();
                    romanticSound1.pause();
                    romanticSound2.pause();
                    scarySound.play();
                    document.getElementById('scary-response').classList.remove('hidden');
                    document.body.className = 'scary';
                    
                    const userInfo = await getUserInfo();
                    document.getElementById('user-info').innerHTML = `
                        <p>IP HP MU: ${userInfo.ip}</p>
                        <p>HAYOLOOO SIAPA SURUH TOLAK CINTAKU!</p>
                    `;
                    saveResponses();
                    break;
            }
        }
    </script>
</body>
</html>